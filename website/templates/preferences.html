{% extends "base.html" %} {%block title %}Home{% endblock %}

{% block content %}
<br />
<form id="preferencesForm" method="POST">

    <div class="form-group">
        <label for="minRange">Minimum Driving Range:</label>
        <input type="number" id="minRange" class="form-control" name="minRange" placeholder="Your minimum driving range" required>
    </div>

    <div class="form-group">
        <label for="minPrice">Minimum Price:</label>
        <input type="number" id="minPrice" class="form-control" name="minPrice" placeholder="Enter the minimum price" required>
    </div>

    <div class="form-group">
        <label for="maxPrice">Maximum Price:</label>
        <input type="number" id="maxPrice" class="form-control" name="maxPrice" placeholder="Enter the maximum price" required>
    </div>


    <div class="form-group">
        <label for="preferredBrands">Preferred Brands:</label><br>
        {% for brand in car_brands %}
        <input type="checkbox" id="{{ brand.name }}" name="preferredBrands" value="{{ brand.name }}">
        <label for="{{ brand.name }}">{{ brand.name }}</label><br>
        {% endfor %}
        <input type="checkbox" id="nothing" name="preferredBrands" value="nothing">
        <label for="nothing">Nothing</label><br>
    </div>

    <div class="form-group">
        <label for="no_way_brands">Are there any brands you are not willing to consider?</label><br>
        {% for brand in car_brands %}
        <input type="checkbox" id="{{ brand.name }}" name="no_way_brands" value="{{ brand.name }}">
        <label for="{{ brand.name }}">{{ brand.name }}</label><br>
        {% endfor %}
        <input type="checkbox" id="nothing2" name="no_way_brands" value="nothing">
        <label for="nothing">Nothing</label><br>
    </div>


    <div class="form-group">
        <label for="daily_commute">Your Daily Commmute:</label>
        <input type="number" id="daily_commute" class="form-control" name="daily_commute" placeholder="Enter your daily commute" required>
    </div>

    <div class="form-group">
        <label for="fastChargingMaxTime">Maximum Charging Time (minutes):</label>
        <input type="number" id="fastChargingMaxTime" class="form-control" name="fastChargingMaxTime"
            placeholder="Enter the maxmim charging time your are willing to wait" required>
    </div>

    <div class="form-group">
        <label>Preferred Manufacturing Country:</label><br>
        {% for country in ["USA", "Germany", "France", "Japan", "Korea", "China"] %}
        <input type="checkbox" id="{{ country }}" name="manufacturing_country" value="{{ country }}">
        <label for="{{ country }}">{{ country }}</label><br>
        {% endfor %}
        <input type="checkbox" id="any_country" name="manufacturing_country" value="Any_Country">
        <label for="any_country">Any Country</label><br>
    </div>


    

    <div class="form-group">
        <label>Preferred Segment (You can choose as many as you want):</label><br>
        {% for segment in ["A (Mini Cars)", "B (Small Cars)", "C (Medium Cars)", "D (Large Cars)", "Jeep", "Sedan", "SUV", "Premium Cars", "Sport Cars"] %}
        <input type="checkbox" id="{{ segment }}" name="car_segment" value="{{ segment }}">
        <label for="{{ segment }}">{{ segment }}</label><br>
        {% endfor %}
        <input type="checkbox" id="any_segment" name="car_segment" value="Any_segment">
        <label for="any_segment">Any Segment</label><br>
    </div>

    <div class="form-group">
        <label for="ncap_rating">Rate the significance of EURO NCAP safety rating (crash tests) on a scale of 1 to 5:</label><br>
        <select id="ncap_rating" name="ncap_rating" class="form-control">
            <option value="1">1 - Least significant</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 - Most significant</option>

        </select>
    </div>

        <div class="form-group">
            <label for="screen_size">Is a big multimdia screen a significant parameter for you?</label><br>
            <select id="screen_size" name="screen_size" class="form-control">
                <option value="1">1 - Least significant</option>
                <option value="2">2</option>
                <option value="3">3 - Most significant</option>        
            </select>
        </div>


    <button type="submit" class="btn btn-primary">Submit Preferences</button>
</form>
<br />
<br />

<script>

    function handleSpecialCheckboxChange(specialCheckboxId, relatedCheckboxesName) {
            const specialCheckbox = document.getElementById(specialCheckboxId);
            const checkboxes = document.querySelectorAll(`input[name="${relatedCheckboxesName}"]:not(#${specialCheckboxId})`);

            specialCheckbox.addEventListener('change', function () {
                if (this.checked) {
                    checkboxes.forEach(checkbox => {
                        checkbox.checked = false;
                        checkbox.disabled = true;
                    });
                } else {
                    checkboxes.forEach(checkbox => {
                        checkbox.disabled = false;
                    });
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function () {
            handleSpecialCheckboxChange('any_country', 'manufacturing_country');
            handleSpecialCheckboxChange('nothing', 'preferredBrands');
            handleSpecialCheckboxChange('nothing2', 'no_way_brands');
            handleSpecialCheckboxChange('any_segment', 'car_segment');

            
        });  
    
</script>



{% endblock%}